<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>

<body>

    <div class="mx-auto d-block container" style="background-color: rgb(37, 9, 88);width: 35%;margin-top:10%;">
        <br>
        <h2 class="text-center text-white mt-2 answer">Password Generator</h2>
        <h3 id="answer" class="answer mt-3 mb-3 text-dark bg-white d-block mx-auto text-center p-1" style="border:solid 1px black;width:350px;">12345</h3>
        <div class="container">
            <div>
                <label class="text-white" style="font-weight: bold;font-size: 19px;">Password length</label>
                <input type="number" maxlength="100" value="5" id="length" style="width: 5rem;margin-left: 10rem;">
            </div>

            <div class="checks">
                <label class="text-white label" style="font-weight: bold;font-size: 19px;">include uppercase letters</label>
                <input type="checkbox" id="upper" checked class="val" style="margin-left: 6rem;"><br>
            </div>
            <div class="checks">
                <label class="text-white label" style="font-weight: bold;font-size: 19px;">include lowercase letters</label>
                <input type="checkbox" id="lower" checked class="val" style="margin-left: 6rem;"><br>
            </div>
            <div class="checks">
                <label class="text-white label" style="font-weight: bold;font-size: 19px;">include numbers</label>
                <input type="checkbox" id="number" checked class="val" style="margin-left: 166px;"><br>
            </div>
            <div class="checks">
                <label class="text-white label" style="font-weight: bold;font-size: 19px;">include symbols</label>
                <input type="checkbox" id="symbol" checked class="val" style="margin-left: 169px;"><br><br>
            </div>

            <button id="generate" class="d-block mx-auto text-white p-2" style="background-color: darkblue;border:none;outline: none;border-radius:10px ;margin:10px 0 20px 0"> Generate password</button>

        </div>
    </div>
    <script>
        function getRandomUpperCase() {
            return String.fromCharCode(Math.floor(Math.random() * 26) + 65); //ascii charCode for uppercaseetter=26 letter is started from 65
        }

        function getRandomLowerCase() {
            return String.fromCharCode(Math.floor(Math.random() * 26) + 97); //ascii charCode for lowercaseetter=26 letter is started from 97
        }

        function getRandomNumber() {
            return String.fromCharCode(Math.floor(Math.random() * 10) + 48); //ascii charCode for number[0:9] is started from 48 
        }

        function getRandomSymbol() {
            var symbol = "!@#$%^&*(){}[]=<>/,.|~?";
            return symbol[Math.floor(Math.random() * symbol.length)];
        }

        var answerEl = document.getElementById("answer");
        var lengthEl = document.getElementById("length");
        var numberEl = document.getElementById("number");
        var lowerEl = document.getElementById("lower");
        var upperEl = document.getElementById("upper");
        var symbolEl = document.getElementById("symbol");
        var generateEl = document.getElementById("generate");
        const randomFunc = {
            upper: getRandomUpperCase,
            lower: getRandomLowerCase,
            number: getRandomNumber,
            symbol: getRandomSymbol
        };
        //when click on button
        generateEl.addEventListener('click', () => {
            const length = lengthEl.value;
            const hasUpper = upperEl.checked;
            const hasLower = lowerEl.checked;
            const hasNumber = numberEl.checked;
            const hasSymbol = symbolEl.checked;

            answerEl.innerText = generatePassword(hasUpper, hasLower, hasNumber, hasSymbol, length);
        });
        //Generate Password Function
        function generatePassword(upper, lower, number, symbol, length) {
            let generatedPassword = "";

            const typesCount = upper + lower + number + symbol;

            //console.log(typesCount);
            //array of object for each function
            const typesArr = [{
                upper
            }, {
                lower
            }, {
                number
            }, {
                symbol
            }].filter(item => Object.values(item)[0]); // arrayObject.filter(arrow function) and return true or false


            if (typesCount === 0) {
                return '';
            }

            for (let i = 0; i < length; i += typesCount) {
                typesArr.forEach(type => {
                    const funcName = Object.keys(type)[0];
                    generatedPassword += randomFunc[funcName]();
                });
            }

            const finalPassword = generatedPassword.slice(0, length);


            return finalPassword;
        }
    </script>

</body>

</html>